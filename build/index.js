(()=>{"use strict";const e=window.wp.element,{__}=wp.i18n,{Fragment:t}=wp.element,{registerBlockType:l}=wp.blocks,{InspectorControls:o}=wp.editor,{withState:s}=wp.compose,{apiFetch:r}=wp,{PanelBody:a,TextControl:n,Button:c,ToggleControl:i,RangeControl:d}=wp.components;l("gutenberg-widget-block/rss-feed",{title:__("RSS Feed"),icon:"rss",category:"widgets",attributes:{numberOfPosts:{type:"integer",default:10},url:{type:"string"},showDescription:{type:"boolean",default:!1},showDate:{type:"boolean",default:!1}},edit:s({validated:!1,error:!1})((l=>{let{attributes:s,className:u,setAttributes:p,setState:m,error:h,validated:b}=l;const{url:g,numberOfPosts:w,showDescription:y,showDate:f}=s;return(0,e.createElement)(t,null,(0,e.createElement)("div",{className:u},(0,e.createElement)("div",{class:"custom-block-section"},(0,e.createElement)(n,{label:__("Feed URL"),placeholder:__("Type the URL of your RSS feed."),value:g,type:"url",onChange:e=>{p({url:e})}}),(0,e.createElement)(c,{isLarge:!0,onClick:()=>{m({error:!1,validated:!1}),r({path:"/gutenbergrssfeed/v2/validateFeedUrl/?url="+g,method:"GET"}).then((e=>{e.success?m({validated:!0}):m({error:!0})}))},type:"submit"},__("Validate")),g&&(0,e.createElement)("p",null,__("The feed output is only visible on the front-end")),h&&(0,e.createElement)("p",{class:"block-error-message"},__("Sorry, either your feed is not a valid one or the URL is incorrect.")),!h&&b&&(0,e.createElement)("p",{class:"block-success-message"},__("Feed validated successfully."))),(0,e.createElement)(o,null,(0,e.createElement)(a,{title:__("RSS Feed Settings")},(0,e.createElement)(d,{label:__("Number of posts to be shown on the front-end"),value:w,min:"1",max:"50",onChange:e=>{p({numberOfPosts:e})}}),(0,e.createElement)(i,{label:__("Display post description"),checked:y,onChange:()=>{p({showDescription:!y})}}),(0,e.createElement)(i,{label:__("Display post date"),checked:f,onChange:()=>{p({showDate:!f})}})))))})),save:e=>null})})();