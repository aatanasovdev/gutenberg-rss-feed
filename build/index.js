(()=>{"use strict";const e=window.wp.element,{__}=wp.i18n,{Fragment:t}=wp.element,{registerBlockType:o}=wp.blocks,{InspectorControls:l}=wp.editor,{withState:n}=wp.compose,{apiFetch:s}=wp,{PanelBody:a,TextControl:r,Button:c,ToggleControl:i,RangeControl:d}=wp.components;o("gutenberg-widget-block/rss-feed",{title:__("RSS Feed"),icon:"rss",category:"widgets",attributes:{numberOfPosts:{type:"integer",default:10},url:{type:"string"},showDescription:{type:"boolean",default:!1},showDate:{type:"boolean",default:!1},showContent:{type:"boolean",default:!1}},edit:n({validated:!1,error:!1})((o=>{let{attributes:n,className:p,setAttributes:u,setState:m,error:h,validated:b}=o;const{url:w,numberOfPosts:g,showDescription:y,showDate:f,showContent:v}=n;return(0,e.createElement)(t,null,(0,e.createElement)("div",{className:p},(0,e.createElement)("div",{class:"custom-block-section"},(0,e.createElement)(r,{label:__("Feed URL"),placeholder:__("Type the URL of your RSS feed."),value:w,type:"url",onChange:e=>{u({url:e})}}),(0,e.createElement)(c,{variant:"secondary",onClick:()=>{m({error:!1,validated:!1}),s({path:"/gutenbergrssfeed/v2/validateFeedUrl/?url="+w,method:"GET"}).then((e=>{e.success?m({validated:!0}):m({error:!0})}))},type:"submit"},__("Validate")),w&&(0,e.createElement)("p",null,__("The feed output is only visible on the front-end.")),h&&(0,e.createElement)("p",{class:"block-error-message"},__("Sorry, either your feed is not a valid one or the URL is incorrect.")),!h&&b&&(0,e.createElement)("p",{class:"block-success-message"},__("Feed validated successfully."))),(0,e.createElement)(l,null,(0,e.createElement)(a,{title:__("RSS Feed Settings")},(0,e.createElement)(d,{label:__("Number of posts to be shown on the front-end"),value:g,min:"1",max:"50",onChange:e=>{u({numberOfPosts:e})}}),(0,e.createElement)(i,{label:__("Display post description"),checked:y,onChange:()=>{u({showDescription:!y})}}),(0,e.createElement)(i,{label:__("Display post date"),checked:f,onChange:()=>{u({showDate:!f})}}),(0,e.createElement)(i,{label:__("Display post content"),checked:v,onChange:()=>{u({showContent:!v})}})))))})),save:e=>null})})();